!function(){function e(e){return e&&e.__esModule?e.default:e}var t={};var n=function(e){var n=t[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n};(function(e){for(var n=Object.keys(e),o=0;o<n.length;o++)t[n[o]]=e[n[o]]})(JSON.parse('{"79b076992ceb4c54":"lcdm.003f5222.js","c2a11e28cce9500a":"1.7b50bb42.jpg","4bcde5bc03180225":"2.a3bc03f7.jpg","63d9e254b760862e":"3.6a083575.jpg","f1524297b8aba29e":"4.9d3928a8.jpg","e41d68345251d908":"5.ae1ae3a9.jpg"}'));var o,i=null;var r,a=function(){return i||(i=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return(""+e[0]).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}()),i},c=n;function s(e){if(""===e)return".";var t="/"===e[e.length-1]?e.slice(0,e.length-1):e,n=t.lastIndexOf("/");return-1===n?".":t.slice(0,n)}function d(e,t){if(e===t)return"";var n=e.split("/");"."===n[0]&&n.shift();var o,i,r=t.split("/");for("."===r[0]&&r.shift(),o=0;(o<r.length||o<n.length)&&null==i;o++)n[o]!==r[o]&&(i=o);var a=[];for(o=0;o<n.length-i;o++)a.push("..");return r.length>i&&a.push.apply(a,r.slice(i)),a.join("/")}(r=function(e,t){return d(s(c(e)),c(t))})._dirname=s,r._relative=d,o=a()+r("79b076992ceb4c54","c2a11e28cce9500a");var u;u=a()+r("79b076992ceb4c54","4bcde5bc03180225");var l;l=a()+r("79b076992ceb4c54","63d9e254b760862e");var w;w=a()+r("79b076992ceb4c54","f1524297b8aba29e");var h,E,v,p,f,y;h=a()+r("79b076992ceb4c54","e41d68345251d908");var m,g,T,b,R=[],H=[],x=new THREE.Vector2,N=new THREE.Raycaster,z=[0,0,0,0,0,0],B=e(o),O=e(u),S=e(l),C=e(w),M=e(h),L=[{elem:document.querySelector(".cube.is-1"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(30,0,0),texture:B,active:!0},{elem:document.querySelector(".cube.is-2"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(30,0,0),texture:O},{elem:document.querySelector(".cube.is-3"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(30,0,0),texture:S},{elem:document.querySelector(".cube.is-4"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(0,0,0),texture:C},{elem:document.querySelector(".cube.is-5"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(0,0,0),texture:M,active:!0}],A=document.querySelectorAll(".shadow-panel");function _(e){var t=e.x,n=e.y;return t+=window.pageXOffset,n+=window.pageYOffset,t+=p.clientWidth/-2,n=p.clientHeight/2-n,t+=e.width/2,n-=e.height/2,{x:t/v.zoom,y:n/v.zoom,height:e.height/v.zoom,width:e.width/v.zoom}}function D(){for(var e=0;e<L.length;e++){var t=L[e],n=t.elem;if(n){var o=_(n.getBoundingClientRect());t.pos=new THREE.Vector3(o.x,o.y,0)}}}function F(e,t,n,o,i,r,a,c){arguments.length>8&&void 0!==arguments[8]&&arguments[8];var s=new CANNON.Box(new CANNON.Vec3(r/2,i/2,a/2)),d=new CANNON.Body({mass:0,position:new CANNON.Vec3(t,n,o),shape:s});m.addBody(d),function(){m.addBody(d);var s=new THREE.BoxBufferGeometry(1,1,1),u=new THREE.Mesh(s,new THREE.MeshBasicMaterial({color:c}));u.scale.set(r,i,a),u.position.x=t,u.position.y=n,u.position.z=o,u.name=e,u.userData.body=d,E.add(u)}()}function q(e){var t=E.getObjectByName(e);t&&(t.userData.body&&m.removeBody(t.userData.body),E.remove(t))}function P(){var e=v.left/v.zoom,t=v.right/v.zoom,n=v.bottom/v.zoom,o=v.top/v.zoom;q("TOP"),q("BOTTOM"),q("LEFT"),q("RIGHT"),F("TOP",e-1,0,0,o-n,2,100,16777215),F("BOTTOM",t+1,0,0,o-n,2,100,255),F("LEFT",0,o+1,0,2,t-e,100,16711680),F("RIGHT",0,n-1,0,2,t-e,100,65280)}function j(){v.left=p.clientWidth/-2,v.right=p.clientWidth/2,v.top=p.clientHeight/2,v.bottom=p.clientHeight/-2,v.updateProjectionMatrix()}function V(){var e,t,n,o,i;t=(e=f).domElement,n=p.clientWidth,o=p.clientHeight,(i=t.width!==n||t.height!==o)&&e.setSize(n,o,!1),i&&(D(),j(),P())}function W(){!function(){var e=g.getDelta(),t=5e-4*Date.now();if(b.position.y=.75*Math.cos(3*t)-5,function(){for(var e=0;e<R.length;e++){var t=R[e],n=t.userData.physicsBody,o=t.position;o.z=0,o.x=Math.min(Math.max(v.left/v.zoom,o.x),v.right/v.zoom),o.y=Math.min(Math.max(v.bottom/v.zoom,o.y),v.top/v.zoom),n.position.set(o.x,o.y,o.z)}}(),G){K&&(ga("send",{hitType:"event",eventCategory:"LCDM",eventAction:"start"}),K=!1);var n=new THREE.Vector3(x.x,x.y,-1).unproject(v),o=n.x,i=n.y,r=n.z,a=new THREE.Vector3;a.setFromMatrixPosition(y.matrixWorld);var c=0;z[c++]=a.x,z[c++]=a.y,z[c++]=a.z,z[c++]=o,z[c++]=i,z[c++]=r,T.geometry.attributes.position.needsUpdate=!0,T.geometry.computeBoundingSphere(),T.visible=!0}else T.visible=!1;if(function(e){m.gravity.set(0,ne,0),m.step(1/60,e,3);for(var t=0;t<R.length;t++){var n=R[t],o=n.userData.physicsBody,i=o.position,r=o.quaternion;n.position.set(i.x,i.y,i.z),n.quaternion.set(r.x,r.y,r.z,r.w)}}(e),Z){if(U++%300==0)for(var s=0;s<R.length;s++){var d=R[s].userData.physicsBody,u=50*Math.random(),l=new THREE.Vector3(Math.random()-.5,Math.random()-.5,Math.random()-.5);l.normalize(),l.multiplyScalar(u);l.x,l.y;d.applyLocalImpulse(l,new CANNON.Vec3(0,0,0))}window.fluidsMovePointers(ee())}else(Z=function(){for(var e=_(document.querySelector(".puzzle").getBoundingClientRect()),t=e.x-e.width/2,n=e.x+e.width/2,o=e.y-e.height/2,i=e.y+e.height/2,r=[],a=0;a<R.length;a++){var c=R[a];if(c.position.x>n||c.position.x<t)return!1;if(c.position.y>i||c.position.y<o)return!1;r.push([a+1,c.position.x])}r.sort((function(e,t){return e[1]-t[1]}));var s=r.map((function(e){return e[0].toString()})).join("");return"12345"===s}())&&(ga("send",{hitType:"event",eventCategory:"LCDM",eventAction:"solved"}),te());f.render(E,v)}(),requestAnimationFrame(W)}window.addEventListener("load",(function(){(function(){ne||(ne=-9.82);(m=new CANNON.World).quatNormalizeSkip=0,m.quatNormalizeFast=!1,m.broadphase=new CANNON.NaiveBroadphase,m.allowSleep=!0,m.gravity.set(0,ne,0),oe=new CANNON.Body({mass:0}),m.add(oe)})(),function(){g=new THREE.Clock,p=document.getElementById("c"),(f=new THREE.WebGLRenderer({canvas:p,alpha:!0})).shadowMap.enabled=!0,f.shadowMap.type=THREE.PCFSoftShadowMap,(v=new THREE.OrthographicCamera(0,0,0,0,1,2e3)).position.z=100,v.zoom=100,j(),D(),(E=new THREE.Scene).add(new THREE.AmbientLight(5263440)),(b=new THREE.DirectionalLight(16777215,1)).position.set(-2,-5,30),b.castShadow=!0,b.shadow.camera=v.clone(),b.shadow.camera.near=30,b.shadow.camera.far=40,b.shadow.mapSize.width=b.shadow.mapSize.height=512,E.add(b);var e=new THREE.BufferGeometry;z=new Float32Array(6),e.setAttribute("position",new THREE.BufferAttribute(z,3)),e.setDrawRange(0,2),T=new THREE.Line(e,new THREE.LineBasicMaterial({color:16777215,linewidth:(t=2,n=window.devicePixelRatio||1,Math.floor(t*n))})),E.add(T);var t,n;var o=new THREE.BoxBufferGeometry(1,1,1);function i(e,t,n,i,r,a){var c=(new THREE.TextureLoader).load(a),s=new THREE.Mesh(o,new THREE.MeshBasicMaterial({map:c}));s.position.set(n.x,n.y,n.z),s.scale.set(t.x,t.y,t.z),s.quaternion.set(e.x,e.y,e.z,e.w);var d=new CANNON.Box(new CANNON.Vec3(.5*t.x,.5*t.y,.5*t.z)),u=new CANNON.Body({mass:r,position:new CANNON.Vec3(n.x,n.y,n.z),shape:d,quaternion:e});return m.addBody(u),s.name="cube"+i,s.userData.physicsBody=u,s.castShadow=!0,s}(y=new THREE.Mesh(new THREE.SphereGeometry(1,16,16),new THREE.MeshBasicMaterial({color:16777215}))).scale.set(.1,.1,.1),y.visible=!1,E.add(y);for(var r=0;r<L.length;r++){var a=L[r]||{pos:void 0,rot:void 0},c=a.pos,s=a.rot||new THREE.Euler(0,0,0),d={x:1,y:1,z:1},u=new THREE.Quaternion;u.setFromEuler(s);var l=document.querySelector(".cube").getBoundingClientRect().width/v.zoom;d.x=l,d.y=l,d.z=l,c||((c={}).x=r*(l+.1)-4,c.y=2,c.z=0);var w=i(u,d,c,r,1,a.texture);a.active||w.userData.physicsBody.sleep(),w.userData.domElem=a.elem,E.add(w),R.push(w),H.push(w)}h=_(document.querySelector(".puzzle").getBoundingClientRect()),x=h.x,N=h.y,B=.2,O=new THREE.MeshBasicMaterial({color:16777215,opacity:.2,transparent:!0}),S=new THREE.PlaneBufferGeometry(h.width,h.height,8,8),C=new THREE.Mesh(S,O),C.position.set(x,N,10),C.name="NOCOLLIDE_CRYSTAL",E.add(C),H.push(C),F("TOP_SHELF",x,N-.1+h.height/2,0,B,h.width,100,10263708),F("BOTTOM_SHELF",x,N+.1-h.height/2,0,B,1.1*h.width,100,10263708),function(){for(var e=function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,r=new THREE.PlaneBufferGeometry(e,t,32,32),a=new THREE.ShadowMaterial;a.opacity=i;var c=new THREE.Mesh(r,a);return c.position.copy(n),c.rotation.copy(o),c.receiveShadow=!0,c},t=new THREE.Euler(0,0,0),n=0;n<A.length;n++){var o=_(A[n].getBoundingClientRect());o.z=-1;var i=e(o.width,o.height,o,t);E.add(i)}}(),window.lastWidth=window.innerWidth,window.addEventListener("resize",(function(){window.lastWidth!==window.innerWidth?(window.RT&&clearTimeout(window.RT),window.RT=setTimeout((function(){return window.location.reload(!1)}),500)):V()}),!1),window.addEventListener("mousemove",Q,!1),window.addEventListener("dragstart",Q,!1),window.addEventListener("mousedown",k,{passive:!1}),window.addEventListener("mouseup",X,!1),window.addEventListener("touchstart",k,{passive:!1}),window.addEventListener("touchend",X,!1),window.addEventListener("touchmove",Q,!1);var h,x,N,B,O,S,C}(),V(),P(),W()}));var G,I,Y=void 0;function k(e){if($(e),J(x),Y){e.preventDefault();var t=Y,n=t.object;I=n.userData.physicsBody;var o=n.worldToLocal(t.point),i=new CANNON.Vec3(o.x*n.scale.x,o.y*n.scale.y,o.z*n.scale.z);G=new CANNON.PointToPointConstraint(I,i,oe,new CANNON.Vec3,20),m.addConstraint(G),y.visible=!0,y.position.copy(t.point),y.parent=n}}function X(e){G&&(m.removeConstraint(G),G=void 0,I=void 0,y.visible=!1)}function $(e){var t=e.touches&&e.touches[0],n=e.changedTouches&&e.changedTouches[0],o=t||n||e,i=document.documentElement.getBoundingClientRect();x.x=o.pageX/i.width*2-1,x.y=-o.pageY/i.height*2+1,x.nonPageX=o.clientX/i.width*2-1,x.nonPageY=-o.clientY/i.height*2+1}function J(e){N.setFromCamera(e,v);var t=N.intersectObjects(H);Y=void 0,t.length>0&&!t[0].object.name.startsWith("NOCOLLIDE")&&(Y=t[0]),Y?(p.style.pointerEvents="all",p.style.cursor="pointer"):G||(p.style.pointerEvents="none",p.style.cursor="auto")}function Q(e){$(e),J(x);var t=new THREE.Vector3(x.x,x.y,-1).unproject(v),n=t.x,o=t.y;t.z;oe.position.x=n,oe.position.y=o,G&&(G.update(),p.style.cursor="move",x.nonPageY>.8&&(window.scroll(window.scrollX,window.scrollY-10),$(e),J(x)))}var U=0,K=!0;window.solve=function(){Z=!0,te()};var Z=!1;function ee(){for(var e=[],t=0;t<R.length;t++){var n=R[t],o=n.position;e.push({x:o.x*v.zoom+v.right,y:o.y*v.zoom+v.top,identifier:n.name})}return e}function te(){q("TOP_SHELF"),q("BOTTOM_SHELF"),q("NOCOLLIDE_CRYSTAL"),window.vantabg.destroy(),window.enableFluids();var e=ee();window.fluidsStartPointers(e),ne=0}var ne=void 0,oe=void 0;var ie=document.querySelector("#navbar-burger-id");ie.addEventListener("click",(function(){if(ie.classList.contains("is-active"))ne=-9.82;else{if(!Z)return;ne=0}}),!1)}();
//# sourceMappingURL=lcdm.003f5222.js.map
