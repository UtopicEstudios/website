!function(){function e(e){return e&&e.__esModule?e.default:e}var t={};var n=function(e){var n=t[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n};(function(e){for(var n=Object.keys(e),o=0;o<n.length;o++)t[n[o]]=e[n[o]]})(JSON.parse('{"79b076992ceb4c54":"lcdm.443d1854.js","c2a11e28cce9500a":"1.7b50bb42.jpg","4bcde5bc03180225":"2.a3bc03f7.jpg","63d9e254b760862e":"3.6a083575.jpg","f1524297b8aba29e":"4.9d3928a8.jpg","e41d68345251d908":"5.ae1ae3a9.jpg"}'));var o,i=null;var r,a=function(){return i||(i=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return(""+e[0]).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}()),i},c=n;function s(e){if(""===e)return".";var t="/"===e[e.length-1]?e.slice(0,e.length-1):e,n=t.lastIndexOf("/");return-1===n?".":t.slice(0,n)}function d(e,t){if(e===t)return"";var n=e.split("/");"."===n[0]&&n.shift();var o,i,r=t.split("/");for("."===r[0]&&r.shift(),o=0;(o<r.length||o<n.length)&&null==i;o++)n[o]!==r[o]&&(i=o);var a=[];for(o=0;o<n.length-i;o++)a.push("..");return r.length>i&&a.push.apply(a,r.slice(i)),a.join("/")}(r=function(e,t){return d(s(c(e)),c(t))})._dirname=s,r._relative=d,o=a()+r("79b076992ceb4c54","c2a11e28cce9500a");var u;u=a()+r("79b076992ceb4c54","4bcde5bc03180225");var l;l=a()+r("79b076992ceb4c54","63d9e254b760862e");var w;w=a()+r("79b076992ceb4c54","f1524297b8aba29e");var h,v,f,E,m,p;h=a()+r("79b076992ceb4c54","e41d68345251d908");var y,g,b,T,R,H,x=[],z=[],S=new THREE.Vector2,M=new THREE.Raycaster,B=[0,0,0,0,0,0],L=e(o),C=e(u),O=e(l),D=e(w),_=e(h),F=[{elem:document.querySelector(".cube.is-1"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(30,0,0),texture:L,active:!0},{elem:document.querySelector(".cube.is-2"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(30,0,0),texture:C},{elem:document.querySelector(".cube.is-3"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(30,0,0),texture:O},{elem:document.querySelector(".cube.is-4"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(0,0,0),texture:D},{elem:document.querySelector(".cube.is-5"),pos:{x:0,y:0,z:0},rot:new THREE.Euler(0,0,0),texture:_,active:!0}],V=document.querySelectorAll(".shadow-panel");function A(e){var t=e.x,n=e.y;return t+=window.pageXOffset,n+=window.pageYOffset,t+=E.clientWidth/-2,n=E.clientHeight/2-n,t+=e.width/2,n-=e.height/2,{x:t/f.zoom,y:n/f.zoom,height:e.height/f.zoom,width:e.width/f.zoom}}function P(){for(var e=0;e<F.length;e++){var t=F[e],n=t.elem;if(n){var o=A(n.getBoundingClientRect());t.pos=new THREE.Vector3(o.x,o.y,0)}}}function j(e,t,n,o,i,r,a,c){var s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,d=new b.btBoxShape(new b.btVector3(r/2,i/2,a/2)),u=new b.btTransform;u.setIdentity(),u.setOrigin(new b.btVector3(t,n,o)),function(){var l=new b.btVector3(0,0,0),w=new b.btDefaultMotionState(u),h=new b.btRigidBodyConstructionInfo(0,w,d,l),f=new b.btRigidBody(h);f.setCollisionFlags(1),f.setFriction(s),y.addRigidBody(f);var E=new THREE.BoxBufferGeometry(1,1,1),m=new THREE.Mesh(E,new THREE.MeshLambertMaterial({color:c}));m.scale.set(r,i,a),m.position.x=t,m.position.y=n,m.position.z=o,m.name=e,m.userData.body=f,v.add(m)}()}function I(e){var t=v.getObjectByName(e);t&&(y.removeRigidBody(t.userData.body),v.remove(t))}function q(){var e=f.left/f.zoom,t=f.right/f.zoom,n=f.bottom/f.zoom,o=f.top/f.zoom;I("TOP"),I("BOTTOM"),I("LEFT"),I("RIGHT"),j("TOP",e-1,0,0,o-n,2,100,16777215),j("BOTTOM",t+1,0,0,o-n,2,100,255),j("LEFT",0,o+1,0,2,t-e,100,16711680),j("RIGHT",0,n-1,0,2,t-e,100,65280)}function W(){f.left=E.clientWidth/-2,f.right=E.clientWidth/2,f.top=E.clientHeight/2,f.bottom=E.clientHeight/-2,f.updateProjectionMatrix()}function G(){var e,t,n,o,i;t=(e=m).domElement,n=E.clientWidth,o=E.clientHeight,(i=t.width!==n||t.height!==o)&&e.setSize(n,o,!1),i&&(P(),W(),q())}function Y(){!function(){var e=g.getDelta(),t=5e-4*Date.now();if(H.position.y=.75*Math.cos(3*t)-5,function(){for(var e=0;e<x.length;e++){var t=x[e],n=t.userData.physicsBody,o=n.getCenterOfMassTransform(),i=t.position;i.z=0,i.x=Math.min(Math.max(f.left/f.zoom,i.x),f.right/f.zoom),i.y=Math.min(Math.max(f.bottom/f.zoom,i.y),f.top/f.zoom),o.setOrigin(new b.btVector3(i.x,i.y,i.z)),n.setCenterOfMassTransform(o)}}(),X){ee&&(ga("send",{hitType:"event",eventCategory:"LCDM",eventAction:"start"}),ee=!1);var n=new THREE.Vector3(S.x,S.y,-1).unproject(f),o=n.x,i=n.y,r=n.z,a=new THREE.Vector3;a.setFromMatrixPosition(p.matrixWorld);var c=0;B[c++]=a.x,B[c++]=a.y,B[c++]=a.z,B[c++]=o,B[c++]=i,B[c++]=r,R.geometry.attributes.position.needsUpdate=!0,R.geometry.computeBoundingSphere(),R.visible=!0}else R.visible=!1;if(function(e){y.setGravity(ie),y.stepSimulation(e);for(var t=0;t<x.length;t++){var n=x[t],o=n.userData.physicsBody.getMotionState();if(o){o.getWorldTransform(T);var i=T.getOrigin(),r=T.getRotation();n.position.set(i.x(),i.y(),i.z()),n.quaternion.set(r.x(),r.y(),r.z(),r.w())}}}(e),te){if(Z++%300==0)for(var s=0;s<x.length;s++){var d=x[s].userData.physicsBody,u=50*Math.random(),l=new THREE.Vector3(Math.random()-.5,Math.random()-.5,Math.random()-.5);l.normalize(),l.multiplyScalar(u);var w=[l.x,l.y,0],h=w[0],E=w[1],z=w[2];d.activate(),d.applyCentralImpulse(new b.btVector3(h,E,z))}window.fluidsMovePointers(ne())}else(te=function(){for(var e=A(document.querySelector(".puzzle").getBoundingClientRect()),t=e.x-e.width/2,n=e.x+e.width/2,o=e.y-e.height/2,i=e.y+e.height/2,r=[],a=0;a<x.length;a++){var c=x[a];if(c.position.x>n||c.position.x<t)return!1;if(c.position.y>i||c.position.y<o)return!1;r.push([a+1,c.position.x])}r.sort((function(e,t){return e[1]-t[1]}));var s=r.map((function(e){return e[0].toString()})).join("");return"12345"===s}())&&(ga("send",{hitType:"event",eventCategory:"LCDM",eventAction:"solved"}),oe());m.render(v,f)}(),requestAnimationFrame(Y)}window.addEventListener("load",(function(){Ammo().then((function(e){var t,n,o,i;T=new(b=e).btTransform,new b.btVector3,t=new b.btDefaultCollisionConfiguration,n=new b.btCollisionDispatcher(t),o=new b.btDbvtBroadphase,i=new b.btSequentialImpulseConstraintSolver,ie||(ie=new b.btVector3(0,-9.8,0)),(y=new b.btDiscreteDynamicsWorld(n,o,i,t)).setGravity(ie),function(){g=new THREE.Clock,E=document.getElementById("c"),(m=new THREE.WebGLRenderer({canvas:E,alpha:!0})).shadowMap.enabled=!0,m.shadowMap.type=THREE.PCFSoftShadowMap,(f=new THREE.OrthographicCamera(0,0,0,0,1,2e3)).position.z=100,f.zoom=100,W(),P(),(v=new THREE.Scene).add(new THREE.AmbientLight(5263440)),(H=new THREE.DirectionalLight(16777215,1)).position.set(-5,-5,30),H.castShadow=!0,H.shadow.camera=f.clone(),v.add(H),H.shadow.mapSize.width=H.shadow.mapSize.height=1024;var e,t,n=new THREE.BufferGeometry;B=new Float32Array(6),n.setAttribute("position",new THREE.BufferAttribute(B,3)),n.setDrawRange(0,2),R=new THREE.Line(n,new THREE.LineBasicMaterial({color:16777215,linewidth:(e=2,t=window.devicePixelRatio||1,Math.floor(e*t))})),v.add(R);var o,i,r,a,c,s,d,u=new THREE.BoxBufferGeometry(1,1,1);function l(e,t,n,o,i,r){var a=(new THREE.TextureLoader).load(r),c=new THREE.Mesh(u,new THREE.MeshLambertMaterial({map:a}));c.position.set(n.x,n.y,n.z),c.scale.set(t.x,t.y,t.z),c.quaternion.set(e.x,e.y,e.z,e.w);var s=new b.btTransform;s.setIdentity(),s.setOrigin(new b.btVector3(n.x,n.y,n.z)),s.setRotation(new b.btQuaternion(e.x,e.y,e.z,e.w));var d=new b.btDefaultMotionState(s),l=new b.btBoxShape(new b.btVector3(.5*t.x,.5*t.y,.5*t.z)),w=new b.btVector3(0,0,0);l.calculateLocalInertia(i,w);var h=new b.btRigidBodyConstructionInfo(i,d,l,w),v=new b.btRigidBody(h);return v.forceActivationState(2),y.addRigidBody(v),c.name="cube"+o,c.userData.physicsBody=v,c.castShadow=!0,c}(p=new THREE.Mesh(new THREE.SphereGeometry(1,16,16),new THREE.MeshLambertMaterial({color:16777215}))).scale.set(.1,.1,.1),p.visible=!1,v.add(p);for(var w=0;w<F.length;w++){var h=F[w]||{pos:void 0,rot:void 0},T=h.pos,S=h.rot||new THREE.Euler(0,0,0),M={x:1,y:1,z:1},L=new THREE.Quaternion;L.setFromEuler(S);var C=document.querySelector(".cube").getBoundingClientRect().width/f.zoom;M.x=C,M.y=C,M.z=C,T||((T={}).x=w*(C+.1)-4,T.y=2,T.z=0);var O=l(L,M,T,w,10,h.texture);h.active&&O.userData.physicsBody.activate(),O.userData.domElem=h.elem,v.add(O),x.push(O),z.push(O)}o=A(document.querySelector(".puzzle").getBoundingClientRect()),i=o.x,r=o.y,a=.2,c=new THREE.MeshBasicMaterial({color:16777215,opacity:.2,transparent:!0}),s=new THREE.PlaneBufferGeometry(o.width,o.height,8,8),(d=new THREE.Mesh(s,c)).position.set(i,r,10),d.name="NOCOLLIDE_CRYSTAL",v.add(d),z.push(d),j("TOP_SHELF",i,r-.1+o.height/2,0,a,o.width,100,10263708),j("BOTTOM_SHELF",i,r+.1-o.height/2,0,a,1.1*o.width,100,10263708),function(){for(var e=function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,r=new THREE.PlaneBufferGeometry(e,t,32,32),a=new THREE.ShadowMaterial;a.opacity=i;var c=new THREE.Mesh(r,a);return c.position.copy(n),c.rotation.copy(o),c.receiveShadow=!0,c},t=new THREE.Euler(0,0,0),n=0;n<V.length;n++){var o=A(V[n].getBoundingClientRect());o.z=-1;var i=e(o.width,o.height,o,t);v.add(i)}}(),window.lastWidth=window.innerWidth,window.addEventListener("resize",(function(){window.lastWidth!==window.innerWidth?(window.RT&&clearTimeout(window.RT),window.RT=setTimeout((function(){return window.location.reload(!1)}),500)):G()}),!1),window.addEventListener("mousemove",K,!1),window.addEventListener("dragstart",K,!1),window.addEventListener("mousedown",Q,{passive:!1}),window.addEventListener("mouseup",$,!1),window.addEventListener("touchstart",Q,{passive:!1}),window.addEventListener("touchend",$,!1),window.addEventListener("touchmove",K,!1)}(),G(),q(),Y()}))}));var X,N,k=void 0;function Q(e){if(J(e),U(S),k){e.preventDefault();var t=k,n=t.object;(N=n.userData.physicsBody).activate(!0);var o=n.worldToLocal(t.point),i=new b.btVector3(o.x*n.scale.x,o.y*n.scale.y,o.z*n.scale.z);X=new b.btPoint2PointConstraint(N,i),y.addConstraint(X,!0),X.m_setting.m_impulseClamp=30,X.m_setting.m_tau=.001,p.visible=!0,p.position.copy(t.point),p.parent=n}}function $(e){X&&(y.removeConstraint(X),X=void 0,N.setActivationState(1),N=void 0,p.visible=!1)}function J(e){var t=e.touches&&e.touches[0],n=e.changedTouches&&e.changedTouches[0],o=t||n||e,i=document.documentElement.getBoundingClientRect();S.x=o.pageX/i.width*2-1,S.y=-o.pageY/i.height*2+1,S.nonPageX=o.clientX/i.width*2-1,S.nonPageY=-o.clientY/i.height*2+1}function U(e){M.setFromCamera(e,f);var t=M.intersectObjects(z);k=void 0,t.length>0&&!t[0].object.name.startsWith("NOCOLLIDE")&&(k=t[0]),k?(E.style.pointerEvents="all",E.style.cursor="pointer"):X||(E.style.pointerEvents="none",E.style.cursor="auto")}function K(e){if(J(e),U(S),X){var t=new THREE.Vector3(S.x,S.y,-1).unproject(f),n=t.x,o=t.y,i=(t.z,X.getPivotInB());i.setX(n),i.setY(o),E.style.cursor="move",S.nonPageY>.8&&(window.scroll(window.scrollX,window.scrollY-10),J(e),U(S))}}var Z=0,ee=!0;window.solve=function(){te=!0,oe()};var te=!1;function ne(){for(var e=[],t=0;t<x.length;t++){var n=x[t],o=n.position;e.push({x:o.x*f.zoom+f.right,y:o.y*f.zoom+f.top,identifier:n.name})}return e}function oe(){I("TOP_SHELF"),I("BOTTOM_SHELF"),I("NOCOLLIDE_CRYSTAL"),window.vantabg.destroy(),window.enableFluids();var e=ne();window.fluidsStartPointers(e),ie=new b.btVector3(0,0,0)}var ie=void 0;var re=document.querySelector("#navbar-burger-id");re.addEventListener("click",(function(){if(re.classList.contains("is-active")){ie=new b.btVector3(0,-9.8,0);for(var e=0;e<x.length;e++)x[e].userData.physicsBody.activate(!0)}else{if(!te)return;ie=new b.btVector3(0,0,0)}}),!1)}();